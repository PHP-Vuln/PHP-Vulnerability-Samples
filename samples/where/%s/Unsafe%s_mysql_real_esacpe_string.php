<?php

/*	Unsafe SQL request using  %s and the function mysql_real_escape_string
	Still unsafe : an argument like $_GET['one'] =" 0 AND 1 = 1 " will work
*/

define( "SQL_TEST", "SELECT * FROM users WHERE userid = %s");


if (isset($_GET['one'])) {
    $one = $_GET['one'];
} else {
    $one = "unsafe_<>_'";
    $_GET['one'] = $one;
}


$conn = mysql_connect('localhost', 'mysql_user', 'mysql_password'); // Connection to the database (address, user, password)


$query = sprintf(SQL_TEST, $one); // Construction of the request
$res = mysql_query($query); //execution
    
$query = sprintf(SQL_TEST, mysql_real_escape_string($one));
$res = mysql_query($query);